#!/usr/bin/env bash
# Configures Nginx to add custom X-Served-By header with hostname

# Install Nginx if not already installed
apt-get update
apt-get install -y nginx

# Configure custom header
hostname=$(hostname)
config_file="/etc/nginx/nginx.conf"

# Insert header configuration after 'http {' block
sed -i "/http {/a \\\tadd_header X-Served-By $hostname;" $config_file

# Restart Nginx
service nginx restart